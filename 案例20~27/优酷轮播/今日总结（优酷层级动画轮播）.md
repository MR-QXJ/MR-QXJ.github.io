## 今日总结（优酷层级动画轮播）

#### 开始主要**定位五个位置**：

**最后两张**图pic9,pic10，**前三张**图pic1-3。pic1居中最大，pic10和pic2其次，pic9和pic3在最外部隐藏：

```
<li class="p1"><img src="img/1.jpg" alt=""></li>
<li class="p2 mid"><img src="img/2.jpg" alt=""></li>
<li class="p3 small"><img src="img/3.jpg" alt=""></li>
<li><img src="img/4.jpg" alt=""></li>
<li><img src="img/5.jpg" alt=""></li>
<li><img src="img/6.jpg" alt=""></li>
<li><img src="img/7.jpg" alt=""></li>
<li><img src="img/8.jpg" alt=""></li>
<li class="p9 small"><img src="img/9.jpg" alt=""></li>
<li class="p10 mid"><img src="img/10.jpg" alt=""></li>
```

#### 点击**按钮**时，

**保存**所有li需要的**样式**到数组，并**判断方向**将所有li之前的样式**给前一个或后一个**li;

```
a = dir ? (i === 0 ? len - 1 : i - 1) : (i === len - 1 ? 0 : i + 1); /*根据按钮向左或向右判断移动方向*/
```

#### 点击tab圆点时，

根据点击和之前的**索引的差值**判断方向：

```
  if (minus === 1 || minus === -(len - 1)) {
       dir = true; //向右
       /* 不能直接传差，只要不是0正负的布尔值都是true*/
       move(dir);
   } else if (minus === -1 || minus === len - 1) {
       dir = false;//向左
       move(dir);
   } else if (minus !== 0) {  /*点击与当前索引差大于一个的*/
   先动画缩小宽高透明度到中间
   缩小动画完成后移动所有元素的位置
}
```

注意点：

**定位偏移量**left和right，botton和top**对应**只能**出现一个**

按向**右按钮**图片是**左移显示到正中间**，反之亦可

#### **索引差大于1**个时

缩小动画完成后遍历移动所有元素的位置：

```
var minus = nowIndex - index; //minus为正左移索引增加，为负右移索引减少
```

a = i - minus；**a**为当前**遍历的li移动的目标位置**

```
  $pics.each(function (i) {
      $(this).animate({ //缩小
          "width": 0,
          "height": 0,
          "left": 485 + "px",
          "top": 135 + "px",
          "opacity": 0
      }, 300, function () {
          var a = i - minus; /*当前遍历的元素移动的目标位置，也代表方向和距离*/
          a += a < 0 ? len : 0;  /*使a在0到len之间不超出范围*/
          a -= a > len - 1 ? len : 0;
          $(this).css("zIndex", arrZ[a]).animate({
              "width": arrW[a] + "px",
              "height": arrH[a] + "px",
              "left": arrL[a] + "px",
              "top": arrT[a] + "px",
              "opacity": arrO[a]
          }, 500, function () {
              toggle = true;
          }).find(".mask").css("display", arrD[a]);
      });
  });
```

